<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f = "http://java.sun.com/jsf/core"
                template="./templates/MainTemplate.xhtml">

    <ui:define name="top">
        <li class="breadcrumb-item">
            <a href="start.xhtml">
                ${msg["main.page"]}
            </a>

        </li>
        <li class="breadcrumb-item active">${msg['userList.breadcrumb']}</li>
    </ui:define>

    <ui:define name="left">
        <ui:include src="./templates/menu.xhtml" />
    </ui:define>


    <ui:define name="content">
            <div class="row">
                <div class="col-12 p-2">
                    <h:form>
                        <div class="text-dark form-floating input-group">
                            <h:inputText id="floatingSearch" class="form-control"
                                 placeholder="#{msg['userList.searchButton']}"
                                 value="#{userListBean.search}"
                            >
                            </h:inputText>
                            <label for="floatingSearch">#{msg['userList.searchButton']}</label>
                            <h:commandButton value="#{msg['userList.searchButton']}"
                                            action="#{userListBean.findUsersByLogin()}"
                                            class="btn btn-success"/>
                        </div>
                    </h:form>

                </div>
            </div>
            <div class="row text-dark">
                <div class="col-12">
                    <table class="table align-middle table-light table-striped table-hover">
                        <caption class="text-light">${msg["userList.table.caption"]}</caption>
                        <thead class="table-dark">
                            <tr>
                                <th scope="col">#{msg['userList.table.id']}</th>
                                <th scope="col">#{msg['userList.table.login']}</th>
                                <th scope="col">#{msg['userList.table.name']}</th>
                                <th scope="col">#{msg['userList.table.activation']}</th>
                                <th scope="col">#{msg['userList.table.edit']}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <c:forEach var="user" items="#{userListBean.foundUsers}">
                                <tr style="height: 7em" class="text">
                                    <th scope="row">${user.id}</th>
                                    <td>${user.login}</td>
                                    <td>${user.name} ${user.surname}</td>
                                    <td>

                                        <h:form>
                                            #{user.active ? msg['userList.table.isActive'] : msg['userList.table.isNotActive']}

                                            <h:commandButton
                                                    class="btn btn-primary"
                                                    action="#{userListBean.toggleUserActivation()}"
                                                    value="#{user.active ? msg['userList.table.deactivate'] : msg['userList.table.activate']}"
                                            />
                                        </h:form>
                                    </td>
                                    <td>
                                        <h:outputLink class="btn btn-primary" value="editUser.xhtml?id=${user.id}" >#{msg['userList.table.editButton']}</h:outputLink>
                                    </td>
                                </tr>
                            </c:forEach>
                        </tbody>
                    </table>
                </div>
            </div>

    </ui:define>

</ui:composition>
